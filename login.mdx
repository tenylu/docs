---
title: "用户登录"
description: "请登录您的 CrowMesh 账号以访问文档"
groups: ["public"]
---

# 用户登录

<Card>
  <div style={{ maxWidth: '400px', margin: '0 auto', padding: '2rem' }}>
    <div style={{ textAlign: 'center', marginBottom: '2rem' }}>
      <h2 style={{ color: '#FA254A', marginBottom: '0.5rem' }}>CrowMesh 文档访问</h2>
      <p style={{ color: '#6B7280', fontSize: '0.9rem' }}>请使用您的 CrowMesh 账号登录以访问完整文档</p>
    </div>
    
    <form id="loginForm">
      <div style={{ marginBottom: '1.5rem' }}>
        <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '500', color: '#374151' }}>
          邮箱地址
        </label>
        <input
          type="email"
          id="email"
          required
          style={{
            width: '100%',
            padding: '0.75rem',
            border: '1px solid #D1D5DB',
            borderRadius: '6px',
            fontSize: '1rem',
            boxSizing: 'border-box',
            transition: 'border-color 0.2s'
          }}
          placeholder="请输入您的邮箱地址"
          onFocus="this.style.borderColor='#FA254A'"
          onBlur="this.style.borderColor='#D1D5DB'"
        />
      </div>
      
      <div style={{ marginBottom: '1.5rem' }}>
        <label style={{ display: 'block', marginBottom: '0.5rem', fontWeight: '500', color: '#374151' }}>
          密码
        </label>
        <input
          type="password"
          id="password"
          required
          style={{
            width: '100%',
            padding: '0.75rem',
            border: '1px solid #D1D5DB',
            borderRadius: '6px',
            fontSize: '1rem',
            boxSizing: 'border-box',
            transition: 'border-color 0.2s'
          }}
          placeholder="请输入您的密码"
          onFocus="this.style.borderColor='#FA254A'"
          onBlur="this.style.borderColor='#D1D5DB'"
        />
      </div>
      
      <div style={{ display: 'flex', alignItems: 'center', marginBottom: '1.5rem' }}>
        <input
          type="checkbox"
          id="remember"
          style={{ marginRight: '0.5rem' }}
        />
        <label for="remember" style={{ fontSize: '0.9rem', color: '#6B7280' }}>
          记住我
        </label>
      </div>
      
      <button
        type="submit"
        style={{
          width: '100%',
          padding: '0.75rem',
          backgroundColor: '#FA254A',
          color: 'white',
          border: 'none',
          borderRadius: '6px',
          fontSize: '1rem',
          fontWeight: '500',
          cursor: 'pointer',
          transition: 'background-color 0.2s'
        }}
        onMouseOver="this.style.backgroundColor='#DF2545'"
        onMouseOut="this.style.backgroundColor='#FA254A'"
      >
        登录
      </button>
    </form>
    
    <div style={{ textAlign: 'center', marginTop: '1.5rem' }}>
      <p style={{ margin: '0.5rem 0', fontSize: '0.9rem', color: '#6B7280' }}>
        还没有账号？ 
        <a href="https://user.crowmesh.com/register" style={{ color: '#FA254A', textDecoration: 'none' }}>
          立即注册
        </a>
      </p>
      <p style={{ margin: '0.5rem 0', fontSize: '0.9rem', color: '#6B7280' }}>
        <a href="https://user.crowmesh.com/forgot-password" style={{ color: '#FA254A', textDecoration: 'none' }}>
          忘记密码？
        </a>
      </p>
    </div>
  </div>
</Card>

<Info>
  登录后您将可以访问完整的 CrowVPN 使用教程和配置指南。
</Info>

<script>
  // 登录表单处理
  document.addEventListener('DOMContentLoaded', function() {
    const loginForm = document.getElementById('loginForm');
    
    loginForm.addEventListener('submit', async function(e) {
      e.preventDefault();
      
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      const remember = document.getElementById('remember').checked;
      
      // 显示加载状态
      const submitBtn = loginForm.querySelector('button[type="submit"]');
      const originalText = submitBtn.textContent;
      submitBtn.textContent = '登录中...';
      submitBtn.disabled = true;
      
      try {
        // 调用 CrowMesh 登录 API
        const response = await fetch('https://api.crowmesh.com/api/v1/passport/auth/login', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Accept': 'application/json',
            'User-Agent': 'CrowVPN-Docs/1.0'
          },
          body: JSON.stringify({
            email: email,
            password: password,
            remember: remember
          })
        });
        
        const data = await response.json();
        
        if (response.ok) {
          // 存储登录信息到 Mintlify 期望的格式
          localStorage.setItem('crowmesh_token', data.data.token);
          localStorage.setItem('mintlify_user', JSON.stringify({
            id: data.data.user.id,
            email: data.data.user.email,
            name: data.data.user.nickname || data.data.user.email.split('@')[0],
            plan: data.data.user.plan?.name || '未知套餐'
          }));
          
          // 显示成功消息
          showMessage('登录成功！正在跳转...', 'success');
          
          // 跳转到首页
          setTimeout(() => {
            window.location.href = '/';
          }, 1500);
        } else {
          showMessage(data.message || '登录失败，请检查邮箱和密码', 'error');
        }
      } catch (error) {
        console.error('登录错误:', error);
        showMessage('网络错误，请稍后重试', 'error');
      } finally {
        // 恢复按钮状态
        submitBtn.textContent = originalText;
        submitBtn.disabled = false;
      }
    });
    
    // 显示提示消息
    function showMessage(message, type) {
      // 移除现有的提示
      const existingAlert = document.querySelector('.alert-message');
      if (existingAlert) {
        existingAlert.remove();
      }
      
      // 创建新的提示
      const alert = document.createElement('div');
      alert.className = 'alert-message';
      alert.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 1rem 1.5rem;
        border-radius: 6px;
        color: white;
        font-weight: 500;
        z-index: 1000;
        max-width: 300px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        ${type === 'success' ? 'background-color: #10B981;' : 'background-color: #EF4444;'}
      `;
      alert.textContent = message;
      
      document.body.appendChild(alert);
      
      // 3秒后自动移除
      setTimeout(() => {
        if (alert.parentNode) {
          alert.remove();
        }
      }, 3000);
    }
  });
</script>
